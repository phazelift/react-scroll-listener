"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_ViewportMetrics=require("react/lib/ViewportMetrics"),_ViewportMetrics2=_interopRequireDefault(_ViewportMetrics),_types=require("types.js"),_types2=_interopRequireDefault(_types),DEFAULT_TIMEOUT_DELAY=300,ScrollListener=function(){function e(){_classCallCheck(this,e),this.scrollTop=0,this.isScrolling=!1,this.onChange=_types2["default"].forceFunction(),this._timeout=void 0,this.scrollTimeoutDelay=DEFAULT_TIMEOUT_DELAY}return _createClass(e,[{key:"init",value:function(e,t){this.scrollTimeoutDelay=_types2["default"].forceNumber(t,DEFAULT_TIMEOUT_DELAY),"undefined"!=typeof window&&(this.onChange=_types2["default"].forceFunction(e),window.addEventListener("scroll",this.onWindowScroll.bind(this)))}},{key:"remove",value:function(){"undefined"!=typeof window&&window.removeEventListener("scroll",this.onWindowScroll)}},{key:"onTimeout",value:function(){this.scrollTop===_ViewportMetrics2["default"].currentScrollTop&&(clearTimeout(this._timeout),this.isScrolling=!1,this.onChange())}},{key:"onWindowScroll",value:function(){this.scrollTop=_ViewportMetrics2["default"].currentScrollTop,this.isScrolling=!0,clearTimeout(this._timeout),this._timeout=setTimeout(this.onTimeout.bind(this),this.scrollTimeoutDelay),this.onChange()}}]),e}();module.exports=ScrollListener;